--문제1 테이블 생성
CREATE TABLE EMP01(
    EMPNO NUMBER(4),
    ENAME VARCHAR2(10),
    JOB VARCHAR2(10),
    MANAGER NUMBER(4),
    HIREDATE DATE NOT NULL,
    SALARY NUMBER(7,2) NOT NULL,
    COMMISSION NUMBER(7,2) DEFAULT 0.0,
    DEPTNO NUMBER(2) NOT NULL
);
ALTER TABLE EMP01 ADD CONSTRAINT EMP01_EMPNO_PK PRIMARY KEY(EMPNO);
ALTER TABLE EMP01 ADD CONSTRAINT EMP01_ENAME_UK UNIQUE(ENAME);

--문제2 데이터 추가
INSERT INTO EMP01 VALUES(7369,'SMITH','CLEAK',7836,'80/12/17',800,NULL,20);
INSERT INTO EMP01 VALUES(7499,'ALLEN','SALESMAN',7369,'87/12/20',1600,300,30);
INSERT INTO EMP01 VALUES(7839,'KING','PRESIDENT',NULL,'81/02/08',5000,NULL,10);

--문제3 다른 테이블 생성
CREATE TABLE MEMBERS(
    ID VARCHAR2(20),
    NAME VARCHAR2(20) NOT NULL,
    REGNO VARCHAR2(13) NOT NULL,
    PHONE VARCHAR2(13) NOT NULL,
    ADDRESS VARCHAR2(100) NOT NULL
);
--PK테이블 입력
ALTER TABLE MEMBERS ADD CONSTRAINT MEMBERS_ID_PK PRIMARY KEY(ID);
--데이터 추가
INSERT INTO MEMBERS VALUES('CHAN','PARK CHAN_HUI','9999-9999','010-0000-0000','KOR');
INSERT INTO MEMBERS VALUES('FUMA','HONG GILL DONG','1234-9999','010-2222-0000','KOR');

--문제4 다른 테이블 생성
CREATE TABLE BOOKS(
    CODE NUMBER(4),
    TITLE VARCHAR2(50) NOT NULL,
    COUNT NUMBER(6) NOT NULL,
    PRICE NUMBER(10) NOT NULL,
    PUBLISH VARCHAR2(50) NOT NULL
);
--PK테이블 입력
ALTER TABLE BOOKS ADD CONSTRAINT BOOKS_CODE_PK PRIMARY KEY(CODE);
--데이터 추가
INSERT INTO BOOKS VALUES(104,'LION KING',6,15000,'KIM');
INSERT INTO BOOKS VALUES(105,'RING OF THE KING',20,25000,'TEMU');




--테이블 만들기(고객)
CREATE TABLE MAIN_USER(
    USER_NO NUMBER(5),
    USER_NAME VARCHAR2(20) NOT NULL,
    USER_AGE NUMBER(3),
    USER_PHONE VARCHAR2(20),
    USER_ADDRESS VARCHAR2(50)
);
ALTER TABLE MAIN_USER ADD CONSTRAINT MAIN_USER_USER_NO_PK PRIMARY KEY(USER_NO);

--테이블 만들기(비디오)
CREATE TABLE VIDEO(
    VIDNO NUMBER(5),
    VIDNAME VARCHAR2(50) NOT NULL,
    VIDTYPE VARCHAR2(30),
    VIDPRICE NUMBER(7) NOT NULL,
    VIDNOW NUMBER(1),
    VIDCOPER VARCHAR2(50),
    VIDOPEN DATE,
    VIDLEVEL NUMBER(1)
);
ALTER TABLE VIDEO ADD CONSTRAINT VIDEO_VIDNO_PK PRIMARY KEY(VIDNO);

--테이블 만들기(대여반납)
CREATE TABLE VIDRETURN(
    VIDRETURNNO NUMBER(5),
    USER_NO NUMBER(5),
    VIDNO NUMBER(5),
    RETURNIN DATE,
    RETURNOUT DATE,
    RETURBPRICE NUMBER(7)
);
ALTER TABLE VIDRETURN ADD CONSTRAINT VIDRETURN_VIDRETURNNO_PK PRIMARY KEY(VIDRETURNNO);
ALTER TABLE VIDRETURN ADD CONSTRAINT VIDRETURN_USER_NO_FK FOREIGN KEY(USER_NO) REFERENCES MAIN_USER(USER_NO) ON DELETE CASCADE;
ALTER TABLE VIDRETURN ADD CONSTRAINT VIDRETURN_VIDNO_FK FOREIGN KEY(VIDNO) REFERENCES VIDEO(VIDNO) ON DELETE CASCADE;


DROP TABLE EMP01;
SELECT * FROM employees;