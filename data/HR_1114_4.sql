--문제 1 
DECLARE
    --총 사원의 수, 급여의 합, 급여의 평균
    TOTAL_EMPLOYEE NUMBER :=0;
    TOTAL_SALARY NUMBER :=0;
    AVG_SALARY NUMBER;
    ROW_EMPLOYEE EMPLOYEES%ROWTYPE;
BEGIN
    FOR ROW_EMPLOYEE IN (SELECT*FROM EMPLOYEES) LOOP
    TOTAL_EMPLOYEE:=TOTAL_EMPLOYEE+1;
    TOTAL_SALARY := TOTAL_SALARY + ROW_EMPLOYEE.SALARY;
    END LOOP;
    AVG_SALARY:=ROUND(TOTAL_SALARY/TOTAL_EMPLOYEE,2);
    DBMS_OUTPUT.PUT_LINE('총사원의 수 : '||TOTAL_EMPLOYEE);
    DBMS_OUTPUT.PUT_LINE('급여의 합 : '||TOTAL_SALARY);
    DBMS_OUTPUT.PUT_LINE('급여의 평균 : '||AVG_SALARY);  
END;
/


--문제 2
--CLARA 사원의 직무, 급여, 입사일자, 커미션, 부서명을 변수에 대입하여 출력
DECLARE
    JOB_ID_CLARA EMPLOYEES.JOB_ID%TYPE;
    SALARY_CLARA EMPLOYEES.SALARY%TYPE;
    HIRE_DATE_CLARA EMPLOYEES.HIRE_DATE%TYPE;
    COMMISSION_PCT_CLARA EMPLOYEES.COMMISSION_PCT%TYPE;
    DEPARTMENT_ID_CLARA EMPLOYEES.DEPARTMENT_ID%TYPE;
    DEPARTMENT_NAME_CLARA DEPARTMENTS.DEPARTMENT_NAME%TYPE;
BEGIN
    --직무, 급여, 입사일자, 커미션
    FOR ROW_EMPLOYEE IN (SELECT * FROM EMPLOYEES) LOOP
        IF (ROW_EMPLOYEE.FIRST_NAME = 'Clara') THEN
            JOB_ID_CLARA := ROW_EMPLOYEE.JOB_ID;
            SALARY_CLARA := ROW_EMPLOYEE.SALARY;
            HIRE_DATE_CLARA := ROW_EMPLOYEE.HIRE_DATE;
            COMMISSION_PCT_CLARA := ROW_EMPLOYEE.COMMISSION_PCT;
            DEPARTMENT_ID_CLARA := ROW_EMPLOYEE.DEPARTMENT_ID;
        END IF;
    END LOOP;
    -- 부서명
    FOR ROW_DEPARTMENT IN (SELECT * FROM DEPARTMENTS) LOOP
        IF(DEPARTMENT_ID_CLARA = ROW_DEPARTMENT.DEPARTMENT_ID)THEN
            DEPARTMENT_NAME_CLARA := ROW_DEPARTMENT.DEPARTMENT_NAME;
        END IF; 
    END LOOP;
    DBMS_OUTPUT.PUT_LINE('직무 : ' || JOB_ID_CLARA);
    DBMS_OUTPUT.PUT_LINE('급여 : ' || SALARY_CLARA);
    DBMS_OUTPUT.PUT_LINE('입사일자 : ' || HIRE_DATE_CLARA);
    DBMS_OUTPUT.PUT_LINE('커미션 : ' || COMMISSION_PCT_CLARA);
    DBMS_OUTPUT.PUT_LINE('부서명 : ' || DEPARTMENT_NAME_CLARA);
END;
/
    
   